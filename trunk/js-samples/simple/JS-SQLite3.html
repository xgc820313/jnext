<HTML>
<STYLE type="text/css"> BODY { font-family: "Arial","Verdana" }</STYLE>
<BODY>
<script src="jnext/jnext.js"></script>
<script src="jnext/Database.js"></script>
<script>
function test()
{
	var myDB = new SQLite3();
	var myDB2 = new SQLite3();
	
	var strPath = document.getElementById( "id_filename" ).value;

    var arColors = new Array();
    arColors[ 0 ] = "eoeoeo";
    arColors[ 1 ] = "fofofo";

	var n = 0;
    if ( !myDB.open( strPath ) )
    {
        alert( "Error opening " + strPath );
        return;
    }
	var strHTML = "";
	var objQuery1 = myDB.query( "select name from sqlite_master where type='table'" );
	var row;
	while ( (row = objQuery1.getRow()) != null )
	{
		var strTable = row[ 0 ];
		var objQuery2 = myDB.query( "select * from " + strTable + " limit 10" );
		
		strHTML += "<h3><center>Table " + strTable + "</center></h3><table>";

		arNames = objQuery2.getColNames();
		strHTML += "<tr bgcolor='LightBlue'>";
		for ( var i=0; i<arNames.length; i++ )
		{
			strHTML += "<td>" + arNames[ i ] + "</td>";
		}
		strHTML += "</tr>";

		arTypes = objQuery2.getColTypes();
		strHTML += "<tr bgcolor='LightSteelBlue'>";
		for ( var i=0; i<arTypes.length; i++ )
		{
			strHTML += "<td>" + arTypes[ i ] + "</td>";
		}
		strHTML += "</tr>";

		while ( (row = objQuery2.getRow()) != null )
		{
			if ( row == "Error" )
			{
				alert( "Error encountered" );
				break;
			}
			n = 1 - n;
			strHTML += "<tr bgcolor='#" + arColors[ n ] + "'>";
			for (var i=0; i<row.length; i++)
			{
				strHTML += "<td>";
				strHTML += row[ i ] + "</td>";
			}
			strHTML += "</tr>";
		}
		strHTML += "</table><hr>";
	}

    myDB.close();
	document.getElementById( "id_Output" ).innerHTML = strHTML;
}
</script>
<h3>JNEXT SQLite3 test</h3>
Please select an SQLite3 file:<br>
<input type="file" id="id_filename" size="40">
</p>
<input type=button value="Read SQLite3 Database" onclick='test()'>
<hr/>
<div id="id_Output"></div>
</BODY>
</HTML>
